diff a/FacturacionVERIFACTU.API/Data/Services/PresupuestoService.cs b/FacturacionVERIFACTU.API/Data/Services/PresupuestoService.cs	(rejected hunks)
@@ -107,52 +107,50 @@ namespace FacturacionVERIFACTU.API.Data.Services
             {
                 Producto? producto = null;
                 if (lineaDto.ArticuloId.HasValue && productosDict.ContainsKey(lineaDto.ArticuloId.Value))
                 {
                     producto = productosDict[lineaDto.ArticuloId.Value];
                 }
 
                 var (tipoImpuesto, iva, recargo) = ResolverTipoImpuesto(
                     tiposImpuestoActivos,
                     lineaDto.TipoImpuestoId,
                     producto,
                     lineaDto.IVA);
 
                 if (!cliente.RegimenRecargoEquivalencia)
                 {
                     recargo = 0m;
                 }
 
                 var linea = new LineaPresupuesto
                 {
                     Orden = orden++,
                     Descripcion = lineaDto.Descripcion,
                     Cantidad = lineaDto.Cantidad,
                     PrecioUnitario = lineaDto.PrecioUnitario,
                     PorcentajeDescuento = lineaDto.PorcentajeDescuento,
-                    IVA = iva,
-                    RecargoEquivalencia = recargo,
                     IvaPercentSnapshot = iva,
                     RePercentSnapshot = recargo,
                     TipoImpuestoId = tipoImpuesto?.Id,
                     ProductoId = lineaDto.ArticuloId
                 };
 
                 CalcularLinea(linea);
                 presupuesto.Lineas.Add(linea);
             }
 
             CalcularTotalesPresupuesto(presupuesto);
 
             _context.Presupuestos.Add(presupuesto);
             await _context.SaveChangesAsync();
 
             _logger.LogInformation(
                 "Creado presupuesto {NumeroPresupuesto} para tenant {TenantId}",
                 numeroCompleto, tenantId);
 
             return await MapearAResponseDto(presupuesto);
         }
 
 
         // API/Services/PresupuestoService.cs - ActualizarPresupuestoAsync
 
@@ -263,73 +261,69 @@ namespace FacturacionVERIFACTU.API.Data.Services
 
                 var (tipoImpuesto, iva, recargo) = ResolverTipoImpuesto(
                     tiposImpuestoActivos,
                     lineaDto.TipoImpuestoId,
                     producto,
                     lineaDto.IVA);
 
                 if (!clienteActual.RegimenRecargoEquivalencia)
                 {
                     recargo = 0m;
                 }
 
                 if (lineaDto.Id.HasValue && lineaDto.Id.Value > 0)
                 {
                     // Actualizar existente
                     var lineaExistente = presupuesto.Lineas
                         .FirstOrDefault(l => l.Id == lineaDto.Id.Value);
 
                     if (lineaExistente != null)
                     {
                         lineaExistente.Orden = orden++;
                         lineaExistente.Descripcion = lineaDto.Descripcion;
                         lineaExistente.Cantidad = lineaDto.Cantidad;
                         lineaExistente.PrecioUnitario = lineaDto.PrecioUnitario;
                         lineaExistente.PorcentajeDescuento = lineaDto.PorcentajeDescuento;
-                        lineaExistente.IVA = iva;
-                        lineaExistente.RecargoEquivalencia = recargo;
                         lineaExistente.IvaPercentSnapshot = iva;
                         lineaExistente.RePercentSnapshot = recargo;
                         lineaExistente.TipoImpuestoId = tipoImpuesto?.Id;
                         lineaExistente.ProductoId = lineaDto.ArticuloId;
 
                         CalcularLinea(lineaExistente);
                     }
                 }
                 else
                 {
                     // Crear nueva
                     var lineaNueva = new LineaPresupuesto
                     {
                         PresupuestoId = presupuesto.Id,
                         Orden = orden++,
                         Descripcion = lineaDto.Descripcion,
                         Cantidad = lineaDto.Cantidad,
                         PrecioUnitario = lineaDto.PrecioUnitario,
                         PorcentajeDescuento = lineaDto.PorcentajeDescuento,
-                        IVA = iva,
-                        RecargoEquivalencia = recargo,
                         IvaPercentSnapshot = iva,
                         RePercentSnapshot = recargo,
                         TipoImpuestoId = tipoImpuesto?.Id,
                         ProductoId = lineaDto.ArticuloId
                     };
 
                     CalcularLinea(lineaNueva);
                     presupuesto.Lineas.Add(lineaNueva);
                 }
             }
 
             // Recalcular totales
             CalcularTotalesPresupuesto(presupuesto);
 
             await _context.SaveChangesAsync();
 
             _logger.LogInformation("Actualizado presupuesto {Numero} para tenant {TenantId}",
                 presupuesto.Numero, tenantId);
 
             return await MapearAResponseDto(presupuesto);
         }
 
         public async Task<PresupuestoResponseDto> CambiarEstadoAsync(
             int tenantId,
             int id,
@@ -476,60 +470,55 @@ namespace FacturacionVERIFACTU.API.Data.Services
 
         private (TipoImpuesto? TipoImpuesto, decimal Iva, decimal Recargo) ResolverTipoImpuesto(
             List<TipoImpuesto> tiposImpuestoActivos,
             int? tipoImpuestoId,
             Producto? producto,
             decimal? ivaOverride)
         {
             TipoImpuesto? tipoImpuesto = null;
 
             if (tipoImpuestoId.HasValue)
             {
                 tipoImpuesto = tiposImpuestoActivos.FirstOrDefault(t => t.Id == tipoImpuestoId.Value);
                 if (tipoImpuesto == null)
                     throw new InvalidOperationException("Tipo de impuesto no v치lido o inactivo");
             }
             else if (producto?.TipoImpuestoId.HasValue == true)
             {
                 tipoImpuesto = tiposImpuestoActivos.FirstOrDefault(t => t.Id == producto.TipoImpuestoId.Value);
                 if (tipoImpuesto == null)
                     throw new InvalidOperationException("Tipo de impuesto del producto no v치lido o inactivo");
             }
             else if (ivaOverride.HasValue)
             {
                 tipoImpuesto = tiposImpuestoActivos.FirstOrDefault(t => t.PorcentajeIva == ivaOverride.Value);
             }
-            else if (producto?.IVA > 0)
-            {
-                tipoImpuesto = tiposImpuestoActivos.FirstOrDefault(t => t.PorcentajeIva == producto.IVA);
-            }
 
             tipoImpuesto ??= tiposImpuestoActivos.FirstOrDefault(t => t.Nombre == "General");
 
             var iva = tipoImpuesto?.PorcentajeIva
                 ?? ivaOverride
-                ?? producto?.IVA
                 ?? 0m;
 
             var recargo = tipoImpuesto?.PorcentajeRecargo ?? 0m;
 
             return (tipoImpuesto, iva, recargo);
         }
 
         /// <summary>
         /// Valida que la transici칩n de estado sea permitida
         /// </summary>
         private void ValidarTransicionEstado(string estadoActual, string nuevoEstado)
         {
             var transicionesPermitidas = new Dictionary<string, List<string>>
             {
                 { "Borrador", new List<string> { "Enviado" } },
                 { "Enviado", new List<string> { "Aceptado", "Rechazado", "Borrador" } },
                 { "Aceptado", new List<string>() }, // Estado final
                 { "Rechazado", new List<string> { "Borrador" } },  // Permite volver a Borrador
                 {"Facturado", new List<string>() }
             };
 
             if (!transicionesPermitidas.ContainsKey(estadoActual))
             {
                 throw new InvalidOperationException($"Estado actual '{estadoActual}' no v치lido");
             }
@@ -577,26 +566,26 @@ namespace FacturacionVERIFACTU.API.Data.Services
                 {
                     Id = l.Id,
                     Orden = l.Orden,
                     Descripcion = l.Descripcion,
                     Cantidad = l.Cantidad,
                     PrecioUnitario = l.PrecioUnitario,
                     PorcentajeDescuento = l.PorcentajeDescuento,
                     ImporteDescuento = l.ImporteDescuento,
                     BaseImponible = l.BaseImponible,
                     IVA = l.IvaPercentSnapshot,
                     ImporteIVA = l.ImporteIva,
                     ImporteRecargo = l.ImporteRecargo,
                     RecargoEquivalencia = l.RePercentSnapshot,
                     Total = l.Importe,
                     TipoImpuestoId = l.TipoImpuestoId,
                     ArticuloId = l.ProductoId,
                     ArticuloCodigo = l.Producto?.Codigo
                 }).ToList(),
                 FechaCreacion = presupuesto.FechaCreacion,
                 FechaModificacion = presupuesto.FechaModificacion
             };
         }
 
         #endregion
     }
-}
\ No newline at end of file
+}
