@inherits LayoutComponentBase
@using Microsoft.AspNetCore.Components.Authorization
@inject ConfirmDialogService Confirm


<div class="notion-app">
    <AuthorizeView>
        <Authorized>
            @* Lado izquierdo: Sidebar *@
            <aside class="notion-sidebar">
                <NavMenu />
            </aside>

            @* Lado derecho: Contenido *@
            <main class="notion-main">
                <div class="notion-content">
                    @Body
                </div>
            </main>
        </Authorized>
        <NotAuthorized>
            @* Pantalla completa para el Login *@
            <main style="width: 100%; height: 100vh;">
                @Body
            </main>
        </NotAuthorized>
    </AuthorizeView>
</div>

<ConfirmDialog IsOpen="@Confirm.IsOpen"
               Title="@Confirm.Title"
               Message="@Confirm.Message"
               ConfirmText="@Confirm.ConfirmText"
               CancelText="@Confirm.CancelText"
               Danger="@Confirm.Danger"
               IsBusy="@Confirm.IsBusy"
               OnCancel="Confirm.CancelAsync"
               OnConfirm="Confirm.ConfirmAsync" />

@code{
    protected override void OnInitialized()
    {
        Confirm.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        Confirm.OnChange -= StateHasChanged;
    }
}